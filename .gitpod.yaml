---
# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.
image:
  file: .gitpod.Dockerfile
tasks:
  - name: Runtime 
    init: docker-compose pull 
    command: docker-compose down && docker-compose up
  - name: build
    init: cargo build
  - name: create topics
    command: |
      gp ports await 9092
      docker exec kafka1 /bin/kafka-topics --create --topic customer_data --bootstrap-server localhost:9092
      docker exec kafka1 /bin/kafka-topics --create --topic customer_data_keys --bootstrap-server localhost:9092 --config cleanup.policy=compact
ports:
  - port: 9092
    visibility: private
    onOpen: ignore
    name: Kafka
  - port: 2182
    visibility: private
    onOpen: ignore
    name: Zookeeper
  - port: 9999
    visibility: private
    onOpen: ignore
    name: Kafka JMX
  - port: 8081
    visibility: private
    onOpen: ignore
    name: Schema Registry
  - port: 8080
    visibility: private
    onOpen: ignore
    name: RP Console

vscode:
  extensions:
  - bungcip.better-toml
  - matklad.rust-analyzer
  - eamodio.gitlens
  - peterj.proto